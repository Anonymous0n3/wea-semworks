﻿
@model List<WebApplication1.Models.HelloDoc>
@using System.Globalization
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<WebApplication1.SharedResource> Localizer

@{
    ViewData["Title"] = "Dashboard";
    var currentLang = CultureInfo.CurrentUICulture.TwoLetterISOLanguageName;
    var returnUrl = Context.Request.Path + Context.Request.QueryString;
}

<div class="container mt-4">

    <!-- Jazykový přepínač -->
    <div class="d-flex justify-content-end mb-3">
        <form method="post" action="/set-language" class="d-inline">
            <input type="hidden" name="returnUrl" value="@returnUrl" />
            <select name="culture" class="form-select form-select-sm w-auto" onchange="this.form.submit()">
                <option value="cs" selected="@((currentLang == "cs") ? "selected" : null)">Čeština</option>
                <option value="en" selected="@((currentLang == "en") ? "selected" : null)">English</option>
            </select>
        </form>
    </div>

    <hr class="my-4" />

    <h2>@Localizer["HelloCouchDBTitle"]</h2>

    @if (Model != null && Model.Any())
    {
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>@Localizer["TextHeader"]</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var doc in Model)
                {
                    <tr>
                        <td>@doc.text</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p><strong>@Localizer["DatabaseEmptyMessage"]</strong></p>
    }

    <form asp-controller="Hello" asp-action="Save" method="post" class="mt-3">
        <div class="form-group">
            <label for="text">@Localizer["EnterNewTextLabel"]</label>
            <input type="text" class="form-control" id="text" name="text" />
        </div>
        <button type="submit" class="btn btn-primary mt-2">@Localizer["SaveButton"]</button>
    </form>
</div>