@model WebApplication1.Models.CountryInfoViewModel
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<WebApplication1.SharedResource> Localizer

<div id="countryWidget_@Guid.NewGuid()" class="country-info-widget border rounded p-3 shadow-sm">
    <h3 class="mb-3">🌍 @Localizer["Country Info"]</h3>

    <!-- Seznam zemí -->
    <div class="input-group mb-3">
        <input type="text" class="form-control input-country" placeholder="Search country..." list="countries" />
        <datalist id="countries">
            @foreach (var item in Model.Countries)
            {
                <option value="@item.Value (@item.Key)"></option>
            }
        </datalist>
        <button class="btn btn-primary btn-search">Search</button>
    </div>

    <!-- Výchozí text / detail země -->
    <div class="country-result mt-4 text-start">
        @if (Model.SelectedCountry != null)
        {
            <h4>@Model.SelectedCountry.Name (@Model.SelectedCountry.IsoCode)</h4>
            <img src="@Model.SelectedCountry.FlagUrl" alt="Flag of @Model.SelectedCountry.Name" class="mb-2" style="height:30px;">
            <p><strong>@Localizer["Capital"]:</strong> @Model.SelectedCountry.CapitalCity</p>
            <p><strong>@Localizer["Currency"]:</strong> @Model.SelectedCountry.Currency</p>
            <p><strong>@Localizer["Phone code"]:</strong> @Model.SelectedCountry.PhoneCode</p>
        }
        else
        {
            <p class="text-muted"> @Localizer["Select a country to see details"].</p>
        }
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const wrapper = document.querySelector('.country-info-widget:last-child');
            if (wrapper) {
                initCountryWidget(wrapper.id);
            }
        });
    </script>
}
