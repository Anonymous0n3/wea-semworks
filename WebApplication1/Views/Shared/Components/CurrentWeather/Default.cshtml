@model WebApplication1.Models.CurrentWeatherViewModel
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<WebApplication1.SharedResource> Localizer

<div class="card shadow-sm p-3 mb-3" id="weatherWidget">
    <h5>@Localizer["Weather for"] @Model.LocationName</h5>

    <!-- overflow: visible, ať dropdown nic neschová -->
    <form id="locationForm"
          class="mb-3 position-relative"
          autocomplete="off"
          style="overflow: visible;"
          data-api="@Url.Content("~/api/locations")">


        <div class="input-group">
            <input type="text"
                   id="locationInput"
                   name="location"
                   class="form-control"
                   placeholder="Enter location"
                   value=""
                   autocomplete="off" />
            <button type="submit" class="btn btn-primary">Update</button>
        </div>

        <!-- Dropdown pro návrhy -->
        <ul id="locationSuggestions"
            class="list-group position-absolute w-100 bg-white border rounded"
            style="z-index:2000; max-height: 250px; overflow-y: auto; display:none;"></ul>
    </form>

    <div class="d-flex align-items-center mb-3">
        <img src="@Model.ConditionIcon" alt="@Model.ConditionText" style="width:48px;height:48px;" />
        <div class="ms-2">
            <h2 class="mb-0">@Model.TempC°C</h2>
            <h5 class="text-muted">@Model.TempF°F</h5>
        </div>
    </div>

    <p>@Model.ConditionText</p>
    <ul class="list-unstyled small">
        <li>@Localizer["Humidity"]: <strong>@Model.Humidity %</strong></li>
        <li>@Localizer["Wind"]: <strong>@Model.WindKph km/h @Model.WindDir</strong></li>
        <li>@Localizer["UV Index"]: <strong>@Model.Uv</strong></li>
        <li>@Localizer["Dew Point"]: <strong>@Model.DewPoint.ToString("0.0")°C</strong></li>
        <li>@Localizer["Air Quality"]: <span class="badge bg-info" title="@Model.AirQualityLevel">@Model.AirQualityIndex</span></li>
    </ul>
</div>

<!-- Externí skript (defer) -->
<script src="~/js/weather-autocomplete.js" defer></script>
